@{
    Layout = null;
}

<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Question Management</title>
    <meta name="description" content="Write your web application description here">
    <meta name="keywords" content="Write some keywords here">
    <meta name="author" content="auratheme">
    <link rel="icon" type="image/x-icon" href="~/ahome/favicon.ico">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="~/lecture/font/googleapis/css2.css?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" href="~/lecture/lib/cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/choices.min.css">
    <link id="bootstrap-ltr" rel="stylesheet" href="~/lecture/css/bootstrap.min.css" />
    <link id="bootstrap-rtl" rel="stylesheet" href="~/lecture/css/bootstrap.rtl.min.css.css" />
    <link rel="stylesheet" href="~/lecture/css/all.min.css" />
    <link rel="stylesheet" href="~/lecture/css/style.css?v=1.1.8" />
</head>

<body class="body-afterlogin">

    <!-- ======= Header ======= -->
    <header id="header" class="header fixed-top d-flex justify-content-between align-items-center">
        <div>
            <a href="index.html" class="logo d-flex align-items-center">
                <span class="brandname smallerforphone">ExamEase</span>
            </a>
        </div>
        <nav class="header-nav text-end">
            <ul class="d-flex justify-content-end align-items-end">
                <li class="d-none d-sm-inline-block nav-item dropdown pe-1 pe-sm-3">
                    <form action="/account/logoff" class="navbar-right" id="logoutForm" method="post">
                        <div class="btn-group">
                            <button type="button"
                                class="btn bg-transparent color-primarycolor border-0 dropdown-toggle px-1 px-sm-2"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                <img id="profilePicture" src="~/lecture/assets/defaultProfilePicture.jpg" alt="Profile"
                                    class="rounded-circle img-fluid" style="width:30px;height:30px;">
                                <span class="ps-1">samantha</span>
                            </button>
                            <ul class="dropdown-menu" style="">
                                <li class="dropdown-header">
                                    <h6>samantha</h6>
                                </li>
                                <li>
                                    <a id="myprofile" class="dropdown-item d-flex align-items-center fs-14"
                                        href="/account/myprofile">
                                        <i class="fa-solid fa-circle-user"></i>&nbsp;&nbsp;<span class="ps-1">My
                                            Profile</span>
                                    </a>
                                </li>
                                <li>
                                    <a id="changepassword" class="dropdown-item d-flex align-items-center fs-14"
                                        href="/account/changepassword">
                                        <i class="fa-solid fa-key"></i>&nbsp;&nbsp;<span class="ps-1">Change
                                            Password</span>
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item d-flex align-items-center fs-14"
                                        href="javascript:localStorage.removeItem('totalSecondsLeft');document.getElementById('logoutForm').submit();">
                                        <i class="fa-solid fa-arrow-right-from-bracket"></i>&nbsp;&nbsp;<span
                                            class="ps-1">Sign Out</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="btn-group">
                            <button type="button"
                                class="btn bg-transparent color-primarycolor border-0 dropdown-toggle px-1 px-sm-2"
                                data-bs-toggle="dropdown" aria-expanded="false">EN</button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item fs-14" href="/home/changelanguage?lang=en">EN (English)</a>
                                </li>
                                <li><a class="dropdown-item fs-14" href="/home/changelanguage?lang=zh">ZH (Chinese)</a>
                                </li>
                                <li><a class="dropdown-item fs-14" href="/home/changelanguage?lang=ms">MS (Malay)</a>
                                </li>
                                <li><a class="dropdown-item fs-14" href="/home/changelanguage?lang=ar">AR (Arabic)</a>
                                </li>

                            </ul>
                        </div>
                        <input name="__RequestVerificationToken" type="hidden"
                            value="CfDJ8MgDIJkAZUZHmCq2PFdmEqo_b4hqp-kdgd3W8N-SxdGTtW5af8ZyzO7i-nhNAnPuv29O3IWlRhSL43BreKR4gYQ8ewYh72YhtHcRk3mmS3MBPZykknnmqKMM04l2OOdkjUpVnSpqGfpw7Ul0S9lfciQavw9GVii0UMiZXRzsRSvWS_7pL7grF_6Nm5HbPWe2dA" />
                    </form>
                </li>
                <li class="nav-item d-block d-sm-none">
                    <i class="fa-solid fa-bars toggle-sidebar-btn me-4" data-bs-toggle="offcanvas" href="#offcanvas"
                        role="button" aria-controls="offcanvas"></i>
                </li>
            </ul>
        </nav>
    </header>


    <!-- ======= Sidebar ======= -->
    <aside id="sidebar-default" class="sidebar d-none d-md-block" tabindex="-1">
        <ul class="sidebar-nav" id="sidebar-nav">
            <li class="nav-item mt-3"><a class="nav-link " href="/dashboard"><i
                        class="fa-solid fa-chart-pie"></i><span>Dashboard</span></a></li>
            <li class="nav-item">
                <a class="nav-link active" href="/question">
                    <i class="fa-solid fa-question"></i> <span>Question Management</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link " href="/exam">
                    <i class="fa-solid fa-file-lines"></i> <span>Exam Management</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link " href="/result">
                    <i class="fa-solid fa-certificate"></i> <span>Exam Result</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link " href="/loginhistory">
                    <i class="fa-solid fa-clock-rotate-left"></i> <span>Login History</span>
                </a>
            </li>
        </ul>
    </aside>

    <!-- ======= 'Only icon' sidebar ======= -->
    <aside id="sidebar-onlyicon" class="sidebar onlyicon d-none d-sm-block d-md-none">
        <ul class="sidebar-nav" id="sidebar-nav">
            <li class="nav-item mt-3"><a class="nav-link " href="/dashboard" data-bs-toggle="tooltip"
                    data-bs-placement="right" title="Dashboard"><i class="fa-solid fa-chart-pie"></i></a></li>
            <li class="nav-item">
                <a class="nav-link active" href="/question" data-bs-toggle="tooltip" data-bs-placement="right"
                    title="Question Management">
                    <i class="fa-solid fa-question"></i>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link " href="/exam" data-bs-toggle="tooltip" data-bs-placement="right"
                    title="Exam Management">
                    <i class="fa-solid fa-file-lines"></i>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link " href="/result" data-bs-toggle="tooltip" data-bs-placement="right"
                    title="Exam Result">
                    <i class="fa-solid fa-certificate"></i>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link " href="/loginhistory" data-bs-toggle="tooltip" data-bs-placement="right"
                    title="Login History">
                    <i class="fa-solid fa-clock-rotate-left"></i>
                </a>
            </li>
        </ul>
    </aside>

    <!-- ======= offcanvas Sidebar for Mobile phone device ======= -->
    <aside id="offcanvas" class="offcanvas offcanvas-start" tabindex="-1">
        <div class="brandname ps-3">ExamEase</div>
        <ul class="sidebar-nav" id="sidebar-nav">
            <li class="nav-item mt-3"><a class="nav-link " href="/dashboard"><i
                        class="fa-solid fa-chart-pie"></i><span>Dashboard</span></a></li>
            <li class="nav-item">
                <a class="nav-link active" href="/question">
                    <i class="fa-solid fa-question"></i> <span>Question Management</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link " href="/exam">
                    <i class="fa-solid fa-file-lines"></i> <span>Exam Management</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link " href="/result">
                    <i class="fa-solid fa-certificate"></i> <span>Exam Result</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link " href="/loginhistory">
                    <i class="fa-solid fa-clock-rotate-left"></i> <span>Login History</span>
                </a>
            </li>
            <li class="nav-item d-inline-block d-sm-none">
                <div class="ps-2">
                    <form action="/account/logoff" class="navbar-right" id="logoutForm" method="post">
                        <div class="btn-group">
                            <button type="button"
                                class="btn bg-transparent color-primarycolor border-0 dropdown-toggle px-1 px-sm-2"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                <img id="profilePicture" src="~/lecture/assets/defaultProfilePicture.jpg" alt="Profile"
                                    class="rounded-circle img-fluid" style="width:30px;height:30px;">
                                <span class="ps-1">samantha</span>
                            </button>
                            <ul class="dropdown-menu" style="">
                                <li class="dropdown-header">
                                    <h6>samantha</h6>
                                </li>
                                <li>
                                    <a id="myprofile" class="dropdown-item d-flex align-items-center fs-14"
                                        href="/account/myprofile">
                                        <i class="fa-solid fa-circle-user"></i>&nbsp;&nbsp;<span class="ps-1">My
                                            Profile</span>
                                    </a>
                                </li>
                                <li>
                                    <a id="changepassword" class="dropdown-item d-flex align-items-center fs-14"
                                        href="/account/changepassword">
                                        <i class="fa-solid fa-key"></i>&nbsp;&nbsp;<span class="ps-1">Change
                                            Password</span>
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item d-flex align-items-center fs-14"
                                        href="javascript:localStorage.removeItem('totalSecondsLeft');document.getElementById('logoutForm').submit();">
                                        <i class="fa-solid fa-arrow-right-from-bracket"></i>&nbsp;&nbsp;<span
                                            class="ps-1">Sign Out</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="btn-group">
                            <button type="button"
                                class="btn bg-transparent color-primarycolor border-0 dropdown-toggle px-1 px-sm-2"
                                data-bs-toggle="dropdown" aria-expanded="false">EN</button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item fs-14" href="/home/changelanguage?lang=en">EN (English)</a>
                                </li>
                                <li><a class="dropdown-item fs-14" href="/home/changelanguage?lang=zh">ZH (Chinese)</a>
                                </li>
                                <li><a class="dropdown-item fs-14" href="/home/changelanguage?lang=ms">MS (Malay)</a>
                                </li>
                                <li><a class="dropdown-item fs-14" href="/home/changelanguage?lang=ar">AR (Arabic)</a>
                                </li>

                            </ul>
                        </div>
                        <input name="__RequestVerificationToken" type="hidden"
                            value="CfDJ8MgDIJkAZUZHmCq2PFdmEqo_b4hqp-kdgd3W8N-SxdGTtW5af8ZyzO7i-nhNAnPuv29O3IWlRhSL43BreKR4gYQ8ewYh72YhtHcRk3mmS3MBPZykknnmqKMM04l2OOdkjUpVnSpqGfpw7Ul0S9lfciQavw9GVii0UMiZXRzsRSvWS_7pL7grF_6Nm5HbPWe2dA" />
                    </form>
                </div>
            </li>
        </ul>
    </aside>


    <div id="notifytoast-container" class="position-fixed top-0 mx-auto p-4 toast-container">
        <div id="notifytoast" class="toast mx-auto bg-info text-white border-0" role="alert" aria-live="assertive"
            aria-atomic="true">
            <div class="toast-header justify-content-between bg-info text-white border-bottom-0">
                <div class="text-white">
                    <i class="fa-solid fa-circle-check pe-1"></i> <strong class="me-auto">Note:</strong>
                </div>
                <button type="button" class="text-end border-0 bg-transparent text-white fs-18 p-0 hover-opacity"
                    data-bs-dismiss="toast" aria-label="Close">X</button>
            </div>
            <div class="toast-body bg-info text-white border-0">
            </div>
        </div>
    </div>

    <div id="selectedtoast-container" class="position-fixed top-0 start-0 end-0 mx-auto p-4 toast-container">
        <div id="selectedtoast" class="toast mx-auto bg-info text-white border-0" role="alert" aria-live="assertive"
            aria-atomic="true">
            <div class="d-flex bg-info">
                <div class="toast-body bg-info text-white border-0">
                </div>
                <button type="button" class="me-2 m-auto border-0 text-white bg-transparent fs-18 p-0 hover-opacity"
                    data-bs-dismiss="toast" aria-label="Close">X</button>
            </div>
        </div>
    </div>
    <div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0 pt-4">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body border-0 pb-4">
                    <div class="mt-2 text-center">
                        <i class="fa-solid fa-trash-can text-delete fs-1"></i>
                        <div class="mt-3 pt-2 fs-15 mx-4 mx-sm-5">
                            <h4 class="fs-22 fw600">Are you Sure To Delete This?</h4>
                            <p class="fs-15 text-muted mx-3 mb-0 pt-1">This cannot be undone! Other related records will
                                also be affected.</p>
                        </div>
                    </div>
                    <div class="d-flex gap-2 justify-content-center mt-4 mb-3">
                        <button type="button" class="btn small btn-light hover-boxshadow"
                            data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn small btn-danger hover-boxshadow" id="confirmed-deletebtn">Yes,
                            Delete It!</button>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <main id="main" class="main pb-9">

        <div class="row">
            <div class="col-12">
                <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                    <h4 class="pagetitle mb-sm-0 fw600">Question Management</h4>
                </div>
            </div>
        </div>

        <section class="section dashboard mt-3 position-relative w-100 h-100">
            <div class="bg-white rounded p-3 shadow position-relative w-100 h-100">
                <div class="pb-2">
                    <a class="btn form-btn btn-primary hover-boxshadow hover-moveup" href="/question/edit"><i
                            class="fa-solid fa-plus pe-1"></i> Add New Record</a>
                    <a href="/question/import"
                        class="btn form-btn btn-secondary hover-boxshadow cursor-pointer hover-moveup"><i
                            class="fa-solid fa-file-excel pe-1"></i> Import From Excel</a>
                    <span
                        onclick="exportToExcel('question', 'Please wait. Table is still loading. Click this after table is loaded.')"
                        data-bs-toggle="tooltip" data-bs-placement="right"
                        title="You can control what you want to export to Excel before clicking this. For example, if you wish to export all the records, click &quot;Show All&quot; at the drop-down button below before clicking &quot;Export to Excel.&quot;"
                        class="btn form-btn btn-secondary hover-boxshadow cursor-pointer hover-moveup"><i
                            class="fa-solid fa-file-excel pe-1"></i> Export to Excel</span>
                    <span
                        onclick="exportToPdf('question', 'Please wait. Table is still loading. Click this after table is loaded.')"
                        data-bs-toggle="tooltip" data-bs-placement="right"
                        title="You can control what you want to export to PDF before clicking this. For example, if you wish to export all the records, click &quot;Show All&quot; at the drop-down button below before clicking &quot;Export to PDF.&quot;"
                        class="btn form-btn btn-secondary hover-boxshadow cursor-pointer hover-moveup"><i
                            class="fa-solid fa-file-pdf pe-1"></i> Export to Pdf</span>
                </div>
                <div class="spinner-container d-none">
                    <div
                        class="spinner d-flex justify-content-center align-items-center text-center color-primarycolor py-5">
                        <div class="py-3">
                            <div class="spinner-border ml-auto" role="status" aria-hidden="true"></div><strong> &nbsp;
                                Loading... </strong>
                        </div>
                    </div>
                </div>
                <div id="question-partialview">
                    <!-- display a dummy empty table while loading the data -->
                    <div class="table-responsive mb-5">
                        <table class="table table-hover align-middle mb-0">
                            <thead class="table-light">
                                <tr>
                                    <th class="thead"></th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="py-4"></div>
                    <div class="dummyfooter row justify-content-between mt-5">
                        <div class="col-md-6">Showing 0 to 0 of 0 entries</div>
                        <div class="col-md-6 text-end">Page 0 of Page 0</div>
                    </div>
                </div>
            </div>
        </section>


    </main>

    <!-- multi-select drop down list -->
    <script src="~/lecture/lib/cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/choices.min.js"></script>
    <script src="~/lecture/js/jquery-3.6.0.js"></script>
    <script src="~/lecture/js/jquery-3.6.0.js"></script>
    <script src="/jquery-validation/dist/jquery.validate.js"></script>
    <script src="/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
    <script src="~/lecture/js/popper.min.js"></script>
    <script src="~/lecture/js/bootstrap.min.js"></script>
    <script src="~/lecture/js/main.js?v=1.1.4"></script>
    <script src="~/lecture/js/filevalidation.js"></script>
    <script src="~/lecture/lib/cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="~/lecture/lib/cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="~/lecture/lib/cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="~/lecture/lib/cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
    <script src="~/lecture/js/html2canvas.min.js"></script>


    <script>
        var tableIdPrefix = "question";
        var fileName = "Question"; //the file name for excel and pdf file (Export to excel, pdf feature)
        var partialview = "question-partialview";
        var loadTableUrl = "/question/getpartialviewlisting";
        resetTable();

        function refreshTable(sort, search, pg, size) {
            if (sort == "undefined" || sort == undefined || sort == null) {
                sort = "";
            }
            if (pg == "undefined" || pg == undefined || pg == null) {
                pg = 1;
            }
            if (size == "undefined" || size == undefined || size == null) {
                size = "";
            }
            if (search == "undefined" || search == undefined || search == null) {
                let searchinput = document.querySelector('input[name="search"]');
                if (searchinput != null) {
                    if (searchinput.value == null || searchinput.value == "") {
                        search = "";
                    } else {
                        search = searchinput.value;
                    }
                } else {
                    search = "";
                }
            }
            $(".spinner-container").removeClass("d-none");
            var url = `${loadTableUrl}?sort=${sort}&search=${search}&pg=${pg}&size=${size}`;
            loadData(url);
        }

        function resetTable() {
            $(".spinner-container").removeClass("d-none");
            var url = loadTableUrl;
            loadData(url);
        }

        function loadData(url) {
            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.text();
                })
                .then(data => {
                    $(`#${partialview}`).html(data);
                    formatDateTimeText();
                })
                .catch(error => {
                    console.error('There was a problem with the fetch operation:', error);
                })
                .finally(() => {
                    $(".spinner-container").addClass("d-none");
                });
        }
    </script>


    <script>
        var lang = 'en';
        var rtlCss = document.querySelector("#bootstrap-rtl");
        var ltrCss = document.querySelector("#bootstrap-ltr");
        if (lang == "ar") {
            document.querySelector("html").setAttribute("lang", "ar");
            document.querySelector("html").setAttribute("dir", "rtl");
            rtlCss.disabled = false;
            ltrCss.disabled = true;
        } else {
            rtlCss.disabled = true;
            ltrCss.disabled = false;
            document.querySelector("html").removeAttribute("lang", "ar");
            document.querySelector("html").removeAttribute("dir", "rtl");
        }

        var currentUrl = window.location.href;
        if (currentUrl.includes("myprofile") || currentUrl.includes("editmyprofile")) {
            $("#myprofile").addClass("active");
        }
        if (currentUrl.includes("changepassword")) {
            $("#changepassword").addClass("active");
        }
        if ("" != "") {
            var imgElement = document.getElementById("profilePicture");
            imgElement.src = "/UploadedFiles/" + "";
        }

        function triggerDeleteConfirmationModal(deleteUrl) {
            $('#confirmDeleteModal').modal('show');
            var confirmDeleteButton = document.querySelector("#confirmed-deletebtn");
            confirmDeleteButton.addEventListener('click', () => {
                window.location = deleteUrl;
            });
        }
    </script>
</body>

</html>
